<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2563eb">
  <link rel="icon" type="image/png" href="favicon.png" sizes="32x32">
  <title>Video Hub</title>
  <link id="css" rel="stylesheet" href="style.css">
</head>
<body>

  <header class="header">
    <h1>ðŸŽ¬ Video Hub</h1>
    <p>Simple video showcase platform</p>
  </header>

  <main class="container">
    <div class="video-list" id="videoList"></div>
  </main>

  <footer class="footer">
    <p>
      Want your video here?
      <a href="mailto:your@email.com">Your Email</a>
    </p>
    <small>
      Note: This is a YouTube parody. We do not use YouTube trademarks.
    </small>
  </footer>

  <script id="js" src="script.js"></script>

  <script>
    let currentVersion = null;

    async function getVersion() {
      const res = await fetch("/version.json", { cache: "no-store" });
      const data = await res.json();
      return data.version;
    }

    function applyVersion(v) {
      document.getElementById("css").href = `/style.css?v=${v}`;
      document.getElementById("js").src = `/script.js?v=${v}`;
    }

    getVersion().then(v => {
      currentVersion = v;
      applyVersion(v);
    });

    setInterval(async () => {
      const latest = await getVersion();
      if (latest !== currentVersion) {
        location.reload();
      }
    }, 30000);
  </script>

</body>
</html>
